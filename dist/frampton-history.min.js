!function(){var t,r;!function(){if("undefined"==typeof Frampton)throw new Error("Frampton is undefined");t=Frampton.__loader.define,r=Frampton.__loader.require}(),t("frampton-history",["exports","frampton/namespace","frampton-history/set_hash","frampton-history/push_state","frampton-history/replace_state","frampton-history/history_change","frampton-history/depth","frampton-history/state","frampton-history/search","frampton-history/hash","frampton-history/path"],function(t,r,e,o,n,s,a,u,i,f,l){"use strict";function p(t){return t&&t.__esModule?t:{"default":t}}var d=p(r),c=p(e),h=p(o),m=p(n),_=p(s),y=p(a),x=p(u),v=p(i),g=p(f),M=p(l);d["default"].History={},d["default"].History.VERSION="0.0.1",d["default"].History.pushState=h["default"],d["default"].History.replaceState=m["default"],d["default"].History.setHash=c["default"],d["default"].History.depth=y["default"],d["default"].History.state=x["default"],d["default"].History.hash=g["default"],d["default"].History.path=M["default"],d["default"].History.search=v["default"],d["default"].History.change=_["default"]}),t("frampton-history/depth",["exports","module","frampton-signals/constant"],function(t,r,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(){return a||(a=s["default"](0)),a}r.exports=n;var s=o(e),a=null}),t("frampton-history/get_history",["exports","module"],function(t,r){"use strict";function e(){return window.history}r.exports=e}),t("frampton-history/get_location",["exports","module"],function(t,r){"use strict";function e(){return window.location}r.exports=e}),t("frampton-history/hash",["exports","module","frampton-signals/stepper","frampton-history/get_location","frampton-history/hash_stream"],function(t,r,e,o,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(){return l||(l=u["default"](i["default"]().hash,f["default"]())),l}r.exports=a;var u=s(e),i=s(o),f=s(n),l=null}),t("frampton-history/hash_stream",["exports","module","frampton-history/location_stream"],function(t,r,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(){return a||(a=s["default"]().map(function(t){return t.hash.replace("#","")})),a}r.exports=n;var s=o(e),a=null}),t("frampton-history/history_change",["exports","module","frampton-history/history_stream"],function(t,r,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(t){return s["default"]().next(t)}r.exports=n;var s=o(e)}),t("frampton-history/history_stack",["exports","frampton-list/last","frampton-history/depth","frampton-history/stack_stream"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0;var s=n(r),a=n(e),u=n(o),i={currentState:null,currentId:0,_store:[]},f=function(t){i._store.push(t),i.currentState=t,i.currentId=t.id,a["default"]().update(i._store.length),u["default"]().pushNext(null)},l=function(t){i.currentState=t,i.currentId=t.id,u["default"]().pushNext(null)},p=function(){i._store.pop(),i.currentState=s["default"](i._store),i.currentId=i.currentState?i.currentState.id:0,a["default"]().update(i._store.length),u["default"]().pushNext(null)};t.stack=i,t.pushHistory=f,t.replaceHistory=l,t.popHistory=p}),t("frampton-history/history_stream",["exports","module","frampton-utils/is_nothing","frampton-history/get_history","frampton-history/stack_stream","frampton-history/popstate_stream"],function(t,r,e,o,n,s){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function u(){return i["default"](d)&&(d=l["default"]().merge(p["default"]()).map(function(){return f["default"]()})),d}r.exports=u;var i=a(e),f=a(o),l=a(n),p=a(s),d=null}),t("frampton-history/location_stream",["exports","module","frampton-history/history_stream","frampton-history/get_location"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(){return i||(i=a["default"]().map(function(){return u["default"]()})),i}r.exports=s;var a=n(e),u=n(o),i=null}),t("frampton-history/parse_search",["exports","module","frampton-utils/memoize","frampton-io/http/query_unescape"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){return 2===t.length&&""!==t[0]&&""!==t[1]}var a=n(e),u=n(o);r.exports=a["default"](function(t){var r={},e=t.replace("?","").split("&");return e.forEach(function(t){var e=t.split("=");s(e)&&(r[u["default"](e[0])]=u["default"](e[1]))}),r})}),t("frampton-history/path",["exports","module","frampton-signals/stepper","frampton-history/get_location","frampton-history/path_stream"],function(t,r,e,o,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(){return l||(l=u["default"](i["default"]().pathname,f["default"]())),l}r.exports=a;var u=s(e),i=s(o),f=s(n),l=null}),t("frampton-history/path_stream",["exports","module","frampton-history/location_stream"],function(t,r,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(){return a||(a=s["default"]().map(function(t){return t.pathname})),a}r.exports=n;var s=o(e),a=null}),t("frampton-history/popstate_stream",["exports","module","frampton-utils/is_nothing","frampton-events/listen","frampton-history/history_stack"],function(t,r,e,o,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(){if(!window.history||!window.history.pushState)throw new Error("History API is not supported by this browser");return u["default"](i)&&(i=o.listen("popstate",window).map(function(t){return t.state&&(t.state.id<n.stack.currentId?n.popHistory():t.state.id>n.stack.currentId&&n.pushHistory(t.state)),t})),i}r.exports=a;var u=s(e),i=null}),t("frampton-history/push_state",["exports","module","frampton-utils/guid","frampton-history/get_history","frampton-history/with_valid_state","frampton-history/history_stack"],function(t,r,e,o,n,s){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var u=a(e),i=a(o),f=a(n);r.exports=f["default"](function(t){t.id=u["default"](),i["default"]().pushState(t,t.name,t.path),s.pushHistory(t)})}),t("frampton-history/replace_state",["exports","module","frampton-utils/guid","frampton-history/get_history","frampton-history/with_valid_state","frampton-history/history_stack"],function(t,r,e,o,n,s){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var u=a(e),i=a(o),f=a(n);r.exports=f["default"](function(t){t.id=u["default"](),i["default"]().replaceState(t,t.name,t.path),s.replaceHistory(t)})}),t("frampton-history/search",["exports","module","frampton-signals/stepper","frampton-history/get_location","frampton-history/search_stream","frampton-history/parse_search"],function(t,r,e,o,n,s){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function u(){return d||(d=i["default"](p["default"](f["default"]().search||""),l["default"]())),d}r.exports=u;var i=a(e),f=a(o),l=a(n),p=a(s),d=null}),t("frampton-history/search_stream",["exports","module","frampton-history/location_stream","frampton-history/parse_search"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(){return i||(i=a["default"]().map(function(t){return u["default"](t.search||"")})),i}r.exports=s;var a=n(e),u=n(o),i=null}),t("frampton-history/set_hash",["exports","module","frampton-history/history_stack"],function(t,r,e){"use strict";function o(t){e.pushState({name:"hash",path:"#"+t})}r.exports=o}),t("frampton-history/stack_stream",["exports","module","frampton-utils/is_nothing","frampton-signals/empty"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(){return a["default"](i)&&(i=u["default"]()),i}r.exports=s;var a=n(e),u=n(o),i=null}),t("frampton-history/state",["exports","module","frampton-signals/stepper","frampton-history/get_history","frampton-history/state_stream"],function(t,r,e,o,n){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function a(){return l||(l=u["default"](i["default"]().state,f["default"]())),l}r.exports=a;var u=s(e),i=s(o),f=s(n),l=null}),t("frampton-history/state_stream",["exports","module","frampton-history/history_stream"],function(t,r,e){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function n(){return a||(a=s["default"]().map(function(t){return t.state})),a}r.exports=n;var s=o(e),a=null}),t("frampton-history/valid_state",["exports","module"],function(t,r){"use strict";function e(t){return!(!t.name||!t.path)}r.exports=e}),t("frampton-history/with_valid_state",["exports","module","frampton-utils/assert","frampton-history/valid_state"],function(t,r,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){return function(r){a["default"]("State not valid",u["default"](r)),t(r)}}r.exports=s;var a=n(e),u=n(o)}),r("frampton-history")}();