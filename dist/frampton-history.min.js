!function(){var t,r;!function(){if("undefined"==typeof Frampton)throw new Error("Frampton is undefined");t=Frampton.__loader.define,r=Frampton.__loader.require}(),t("frampton-history",["exports","frampton/namespace","frampton-history/set_hash","frampton-history/push_state","frampton-history/replace_state","frampton-history/history_change","frampton-history/depth","frampton-history/state","frampton-history/search","frampton-history/hash","frampton-history/path"],function(t,r,e,n,o,a,s,u,i,f,l){"use strict";function p(t){return t&&t.__esModule?t:{"default":t}}var d=p(r),c=p(e),h=p(n),m=p(o),_=p(a),y=p(s),g=p(u),x=p(i),v=p(f),M=p(l);d["default"].History={},d["default"].History.VERSION="0.0.2",d["default"].History.pushState=h["default"],d["default"].History.replaceState=m["default"],d["default"].History.setHash=c["default"],d["default"].History.depth=y["default"],d["default"].History.state=g["default"],d["default"].History.hash=v["default"],d["default"].History.path=M["default"],d["default"].History.search=x["default"],d["default"].History.change=_["default"]}),t("frampton-history/depth",["exports","module","frampton-signal/create"],function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){return s||(s=a["default"](0)),s}r.exports=o;var a=n(e),s=null}),t("frampton-history/get_history",["exports","module","frampton/namespace"],function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){return{state:null,pushState:function(t,r,e){},replaceState:function(t,r,e){}}}function a(){return s["default"].isTest()?o():window.history}r.exports=a;var s=n(e)}),t("frampton-history/get_location",["exports","module","frampton/namespace"],function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){return a["default"].isTest()?{pathname:"/test/path",search:"?test=true"}:window.location}r.exports=o;var a=n(e)}),t("frampton-history/hash_signal",["exports","module","frampton-utils/is_nothing","frampton-history/location_signal"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(){return s["default"](i)&&(i=u["default"]().map(function(t){return t.hash.replace("#","")})),i}r.exports=a;var s=o(e),u=o(n),i=null}),t("frampton-history/hash",["exports","module","frampton-signal/stepper","frampton-history/get_location","frampton-history/hash_signal"],function(t,r,e,n,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function s(){return l||(l=u["default"](i["default"]().hash,f["default"]())),l}r.exports=s;var u=a(e),i=a(n),f=a(o),l=null}),t("frampton-history/history_change",["exports","module","frampton-history/history_signal"],function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t){return a["default"]().next(t)}r.exports=o;var a=n(e)}),t("frampton-history/history_signal",["exports","module","frampton-utils/is_nothing","frampton-history/get_history","frampton-history/stack_signal","frampton-history/popstate_signal"],function(t,r,e,n,o,a){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function u(){return i["default"](d)&&(d=l["default"]().merge(p["default"]()).map(function(){return f["default"]()})),d}r.exports=u;var i=s(e),f=s(n),l=s(o),p=s(a),d=null}),t("frampton-history/history_stack",["exports","frampton-list/last","frampton-history/depth","frampton-history/stack_signal"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}t.__esModule=!0;var a=o(r),s=o(e),u=o(n),i=s["default"](),f=u["default"](),l={currentState:null,currentId:0,_store:[]},p=function(t){l._store.push(t),l.currentState=t,l.currentId=t.id,i(l._store.length),f(null)},d=function(t){l.currentState=t,l.currentId=t.id,f(null)},c=function(){l._store.pop(),l.currentState=a["default"](l._store),l.currentId=l.currentState?l.currentState.id:0,i(l._store.length),f(null)};t.stack=l,t.pushHistory=p,t.replaceHistory=d,t.popHistory=c}),t("frampton-history/location_signal",["exports","module","frampton-utils/is_nothing","frampton-history/history_signal","frampton-history/get_location"],function(t,r,e,n,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function s(){return u["default"](l)&&(l=i["default"]().map(function(){return f["default"]()})),l}r.exports=s;var u=a(e),i=a(n),f=a(o),l=null}),t("frampton-history/parse_search",["exports","module","frampton-utils/memoize","frampton-io/http/utils/query_unescape"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(t){return 2===t.length&&""!==t[0]&&""!==t[1]}var s=o(e),u=o(n);r.exports=s["default"](function(t){var r={},e=t.replace("?","").split("&");return e.forEach(function(t){var e=t.split("=");a(e)&&(r[u["default"](e[0])]=u["default"](e[1]))}),r})}),t("frampton-history/path_signal",["exports","module","frampton-history/location_signal"],function(t,r,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(){return s||(s=a["default"]().map(function(t){return t.pathname})),s}r.exports=o;var a=n(e),s=null}),t("frampton-history/path",["exports","module","frampton-signal/stepper","frampton-history/get_location","frampton-history/path_signal"],function(t,r,e,n,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function s(){return l||(l=u["default"](i["default"]().pathname,f["default"]())),l}r.exports=s;var u=a(e),i=a(n),f=a(o),l=null}),t("frampton-history/popstate_signal",["exports","module","frampton-utils/is_nothing","frampton-events/on_event","frampton-history/history_stack"],function(t,r,e,n,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function s(){if(!window.history||!window.history.pushState)throw new Error("History API is not supported by this browser");return u["default"](f)&&(f=i["default"]("popstate",window).map(function(t){return t.state&&(t.state.id<o.stack.currentId?o.popHistory():t.state.id>o.stack.currentId&&o.pushHistory(t.state)),t})),f}r.exports=s;var u=a(e),i=a(n),f=null}),t("frampton-history/push_state",["exports","module","frampton-utils/guid","frampton-history/get_history","frampton-history/with_valid_state","frampton-history/history_stack"],function(t,r,e,n,o,a){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var u=s(e),i=s(n),f=s(o);r.exports=f["default"](function(t){t.id=u["default"](),i["default"]().pushState(t,t.name,t.path),a.pushHistory(t)})}),t("frampton-history/replace_state",["exports","module","frampton-utils/guid","frampton-history/get_history","frampton-history/with_valid_state","frampton-history/history_stack"],function(t,r,e,n,o,a){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var u=s(e),i=s(n),f=s(o);r.exports=f["default"](function(t){t.id=u["default"](),i["default"]().replaceState(t,t.name,t.path),a.replaceHistory(t)})}),t("frampton-history/search_signal",["exports","module","frampton-utils/is_nothing","frampton-history/location_signal","frampton-history/parse_search"],function(t,r,e,n,o){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function s(){return u["default"](l)&&(l=i["default"]().map(function(t){return f["default"](t.search||"")})),l}r.exports=s;var u=a(e),i=a(n),f=a(o),l=null}),t("frampton-history/search",["exports","module","frampton-signal/stepper","frampton-history/get_location","frampton-history/search_signal","frampton-history/parse_search"],function(t,r,e,n,o,a){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function u(){return d||(d=i["default"](p["default"](f["default"]().search||""),l["default"]())),d}r.exports=u;var i=s(e),f=s(n),l=s(o),p=s(a),d=null}),t("frampton-history/set_hash",["exports","module","frampton-history/history_stack"],function(t,r,e){"use strict";function n(t){e.pushState({name:"hash",path:"#"+t})}r.exports=n}),t("frampton-history/stack_signal",["exports","module","frampton-utils/is_nothing","frampton-signal/create"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(){return s["default"](i)&&(i=u["default"]()),i}r.exports=a;var s=o(e),u=o(n),i=null}),t("frampton-history/state_signal",["exports","module","frampton-utils/is_nothing","frampton-history/history_signal"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(){return s["default"](i)&&(i=u["default"]().map(function(t){return t.state})),i}r.exports=a;var s=o(e),u=o(n),i=null}),t("frampton-history/state",["exports","module","frampton-utils/is_nothing","frampton-signal/stepper","frampton-history/get_history","frampton-history/state_signal"],function(t,r,e,n,o,a){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function u(){return i["default"](d)&&(d=f["default"](l["default"]().state,p["default"]())),d}r.exports=u;var i=s(e),f=s(n),l=s(o),p=s(a),d=null}),t("frampton-history/valid_state",["exports","module"],function(t,r){"use strict";function e(t){return!(!t.name||!t.path)}r.exports=e}),t("frampton-history/with_valid_state",["exports","module","frampton-utils/assert","frampton-history/valid_state"],function(t,r,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function a(t){return function(r){s["default"]("State not valid",u["default"](r)),t(r)}}r.exports=a;var s=o(e),u=o(n)}),r("frampton-history")}();